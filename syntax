possible syntax for mole ("M0 Overlay LanguagE")

- types

registers: I, N, S, P
primitive string: cs


- struct

struct {
    I int_thingy;
    N n_thingy;
} struct_thingy;

- functions

chunk main (I a1, I a2, I a3) {
    const I stdout 1;
    const cs hello "ohai.  im in ur m0";
    
    // annotation for the right file will be added by m1 compiler
    m0::print_i stdout, hello;
    var I i_thingy;
    i_thingy += a3++;
    c::fprintf(stdout, "asdfw %d\n", i_thingy);
    call_chunk "chunk_name", arg_array;
}

e composed op
  * acts like an inline function
  * has temporary registers, decleared inline
  * does not have an explict return statement

composed init_cf(P new_cf, I retpc_label) {
alloc_cf:
    tmp I cf_size = 256;
    tmp I flags = 0;
    new_cf = m0::gc_alloc cf_size, flags;
    
init_cf_copy:
    new_cf[INTERP] = cf[INTERP];
    new_cf[CHUNK]  = cf[CHUNK];
    new_cf[CONSTS] = cf[CONSTS];
    new_cf[MDS]    = cf[MDS]
    new_cf[BCS]    = cf[BCS]
    new_cf[PCF]    = cf[CF];
    new_cf[CF]     = new_cf;

init_cf_zero:
    new_cf[EH] = 0;
    new_cf[RETPC] = 0;
    new_cf[SPILLCF] = 0;
    RETPC = retpc_label;

init_cf_pc:
    new_cf[PC] = post_set;
    CF = new_cf;

post_set:
}
